//
//  jenDsp.cpp
//  jenMax
//
//  Created by Mitchell Nordine on 1/08/13.
//
//

#include "JenDsp.h"

//--------------------------------------------------------------------------------//
// SETUP JENDSP
//--------------------------------------------------------------------------------//

void JenDsp::setup(InstrumentEditor *_instrumentEditor)
{
    redux.setup();
    reverb.setup();
    
    ie = _instrumentEditor;
    
    updateInstrumentEditorChannels();
    
    /* DSP */
    ieVolume.setVolume(ieVol);
    ieVolume.addInputFrom(&ieMixer);
    redux.addInputFrom(&ieVolume);
    //reverb.addInputFrom(&ieVolume);
//    distortion.addInputFrom(&ieVolume);
//    phasor.addInputFrom(&ieVolume);
  
    /* Mixers */
    soundMixer.addInputFrom(&redux);
  //  soundMixer.addInputFrom(&reverb);
  //  soundMixer.addInputFrom(&distortion);
  //  soundMixer.addInputFrom((&phasor));
    return;
    
}

//--------------------------------------------------------------------------------//
// INSTRUMENT EDITOR CHANNEL
//--------------------------------------------------------------------------------//

void JenDsp::updateInstrumentEditorChannels()
{
    
    /* Remove all previous inputs */
    while (ieMixer.getInputs().size()) {
        ieMixer.removeInputFrom(ieMixer.getInputs().at(0));
    }
    
    /* Add new input for each oscillator in instrument */
    for (int i=0; i<ie->inst->numOfOscillators; i++) {
        ieMixer.addInputFrom(&ie->inst->oscillators.at(i));
    }
    
    return;
    
}

//--------------------------------------------------------------------------------//
//
//--------------------------------------------------------------------------------//



//--------------------------------------------------------------------------------//
//
//--------------------------------------------------------------------------------//



//--------------------------------------------------------------------------------//
//
//--------------------------------------------------------------------------------//



//--------------------------------------------------------------------------------//
//
//--------------------------------------------------------------------------------//



//--------------------------------------------------------------------------------//
//
//--------------------------------------------------------------------------------//



//--------------------------------------------------------------------------------//
//
//--------------------------------------------------------------------------------//



//--------------------------------------------------------------------------------//
//
//--------------------------------------------------------------------------------//



